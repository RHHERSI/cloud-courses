# S3 by Ryan Kroonenburg

## S3 101

Simple Storage Service 

It is a **Universal Namespace**. Names must be unique **globally**

Provides developers and IT teams with **secure, durable, highly scalable** object storage.
Amazon **S3** is easy to use, with a simple web services interface to store and retrieve any amount of data from anywhere on the web.

*S3 is a safe place to store files*

* Object based storage
* Data is spread accorss multiple devices and multiple facilities

### Files

* Can be from 0 Bytes to 5 TB
* Unlimited Storage
* Files are stored in Buckets (*Folder*)

Names must be unique globally because it generates URLs to access

**S3** Endpoint `https://acloudguru.us-east-1.amazonaws.com`

* Successful upload -> HTTP Status Code **200**
  
#### Attributes

* Key (Name of the object)
* Value (Data bytes)
* VersionID (*Important for versioning*)
* Metadata (data about data stored)
* Subresources
    * Access Control Lists
    * Torrent

### Data Consistency

* **Read after Write** consistency for **PUTS** of new Objects
* **Eventual Consistency** for **overwrite** PUTS and DELETES (can take some time to propagate)

#### Guarantees

* Build for **99.99%** availability for the S3 platform
* Amazon Guarantee **99.9%** availability
* Amazon guarantees **99.999999999%** durability for S3 information (11x 9s)

### Features

* Tiered Storage Available
* Lifecycle Management (move objects to different storage tiers by date rules)
* Versioning
* Encryption
* MFA Delete
* Secure data with **Access Control Lists** and **Bucket Policies**
  
### S3 Storage Classes

#### S3 Standard

* **99.9%** availability
* **99.999999999%** durability
* Stored **redundantly** across **multiple devices** in multiple facilities, and is designed to **sustain the loss of 2 facilities concurrently**.

#### S3 - Infrequently Accessed

For data that is accessed less frequently, but requires **RAPID** access when needed.

**LOWER** fee than S3 **Standard**, but charges **RETRIEVAL FEE**.

#### S3 One Zone - Infrequently Accessed

**LOWER** cost option for **infrequently accessed** data, but do **NOT** require the **multiple Availability Zone** data resilience.

* Uses only one availability zone

#### S3 - Intelligent Tiering

Designed to optimize costs by automatically moving data to the most cost-effective access tier, without performance impact or operational overhead

#### S3 - Glacier

Secure, durable and low-cost storage class for **data archiving**.

Store any amount of data at costs that are competitive with or chearper than on-premises solutions.

**Retrieval times configurable from minutes to hours**

#### S3 - Glacier Deep Archive

S3's **LOWEST COST** storage class where a retrieval time of **12 hours** is **acceptable**

**S3 Summary**
<img src=./assets/s3table.PNG>

### Pricing

* Charged in terms of storate
* Requests
* Store Management Pricing
* Data Transfer Pricing
* Transfer Acceleration
    * **Fast, easy and secure transfers** of files over **long distances** between end **users** and **S3 bucket**
    *  Users Amazon **CloudFront**'s globally distributed **EDGE LOCATIONS**
    *  As data arrives to edge location, it is then **routed** to **S3** over **optimized** **network** (Backbone network) path
* Cross Region Replication *Automatic replication amongst regions*
    * Reasons may be high availability or disaster recovery 

### Lesson Outputs

* S3 is OBJECT-BASED
* Files can be from 0 Bytes to 5 TB
* Unlimited storage
* Files are stored in Buckets
* S3 is a universal namespace (bucket name must be unique globally)
    * Creates DNS name
* **NOT SUITABLE TO INSTALL AN OPERATING SYSTEM ON**
    * ONLY STORE FILES
* Success Uploads responds HTTP Status Code **200**
* **MFA Delete** is available to **protect objects**
* Objects are *Key, Value, VersionID, Metadata, ACL, Torrent*
* Consistency Models (Read after Write on New Objects / Eventual Consistency on **OVERWRITE PUTS** and **DELETES**)
* Classes
    * S3 Standard ( 4x 9s availability and 11x 9s durability )
    * S3 IA - Infrequent Access (charges retrieval fee)
    * S3 One Zone - IA [OR ARS]
    * S3 Intelligent Tiering (Machine Learning)
    * S3 Glacier (Archiving minutes to hours retrieval)
    * S3 Glacier Deep Archiving (Hours to retrieval)

[**READ S3 FAQ**](https://aws.amazon.com/pt/s3/faqs/)

## S3 Demo

* Access S3
* Note it is a Global region
* Choose unique bucket name
* Region
* Block all public access (default **all blocked**)
* Bucket Versioning
* Encryption
* Object lock
* Create Bucket

### Upload files

* Open Bucket
* Upload Files
* Click on a file for more information

<img src="./assets/s3filedata.PNG">

**Trying to access OBJECT URL will respond AccessDenied**

### Public Access

In order to make files publicly available, the **Bucket** must also be publicly available.

Alter Permission -> Public Access

**Trying to access OBJECT URL will still respond AccessDenied**

Open object information and **MAKE PUBLIC**

Now the URL responds the object

### Storage Class for an individual Object

Alter Storage class

### Bucket modification

#### Permissions

* Block Public Access -> Flags to allow object to be public or private
* Access Control Lists -> Fine Grained AC to the object level
* Bucket Policy -> Policies up to the bucket level
* CORS Configuration -> Front-End

#### Management

* Lifecycle Rules
* Replication

### Lesson Outputs

Control access to bucket using either a **Bucket ACL** or using **Bucket Policies**

## S3 Pricing Tiers